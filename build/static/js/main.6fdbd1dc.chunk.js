(this.webpackJsonpexamensarbete=this.webpackJsonpexamensarbete||[]).push([[0],{109:function(e,n,t){"use strict";t.r(n);var i,c,r,o,a,s,d,l,m,u,j,b,f,h,O,g,x,p,v,y,w,k,E,S,C,L,N,q,I,M,T,W,D,z,J,R,U,A,P=t(0),X=t.n(P),Y=t(17),B=t.n(Y),H=(t(64),t(16)),V=t(4),F=t(2),G=t(26),K=t(9),Q=t(3),Z=t(13),$=t(52),_=t.n($)()("https://a-digital-whiteboard.herokuapp.com/"),ee=t(1),ne=function(e){var n=e.setMessages,t=e.setMessage,i=e.message,c=e.messages,r=Object(V.h)().name,o=Object(P.useRef)(null);Object(P.useEffect)((function(){return _.on("message",(function(e){n([].concat(Object(G.a)(c),[e]))})),function(){_.off("message")}}),[c,n]);return Object(P.useEffect)((function(){var e;null===(e=o.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[c]),Object(ee.jsxs)(te,{children:[Object(ee.jsxs)(me,{children:[null===c||void 0===c?void 0:c.map((function(e,n){return e.user===r?Object(ee.jsxs)(ie,{children:[Object(ee.jsx)(Z.c,{}),Object(ee.jsx)(ae,{children:Object(ee.jsx)(oe,{children:e.text})})]},n):"admin"===e.user?Object(ee.jsx)(ue,{children:Object(ee.jsx)(je,{children:Object(ee.jsx)(oe,{children:e.text})})},n):Object(ee.jsxs)(ce,{children:[Object(ee.jsxs)(se,{children:[Object(ee.jsxs)(re,{children:[e.user,":"]}),Object(ee.jsx)(oe,{children:e.text})]}),Object(ee.jsx)(Z.c,{})]},n)})),Object(ee.jsx)("div",{ref:o})]}),Object(ee.jsx)(de,{onSubmit:function(e){e.preventDefault(),i&&_.emit("sendMessage",i,(function(){return t("")}))},children:Object(ee.jsx)(le,{type:"text",value:i||"",required:!0,onChange:function(e){return t(e.target.value)},placeholder:"Write some thing..."})})]})},te=Q.a.div(i||(i=Object(F.a)(["\n    position: absolute;\n    height: 23rem;\n    width: 16rem;\n    bottom: 16%;\n    border: 1px solid black;\n    border-radius: 0.5rem;\n    display: flex;\n    flex-direction: column;\n    padding-top: 1rem;\n    padding-bottom: 0.3rem;\n    margin-left: 1rem;\n    justify-content: space-between;\n    background-color: #ececec;\n"]))),ie=Q.a.div(c||(c=Object(F.a)(["\n    align-self: flex-start;\n    display: flex;\n    align-items: center;\n    margin-left: 0.2rem;\n    margin-bottom: 0.4rem;\n"]))),ce=Q.a.div(r||(r=Object(F.a)(["\n    align-self: flex-start;\n    display: flex;\n    align-items: center;\n    margin-right: 0.2rem;\n    margin-bottom: 0.4rem;\n    justify-content: flex-end;\n"]))),re=Q.a.p(o||(o=Object(F.a)(["\n    margin: 0;\n    margin-left: 0.5rem;\n    font-size: 0.7rem;\n    text-align: left;\n    overflow-wrap: break-word;\n"]))),oe=Q.a.p(a||(a=Object(F.a)(["\n    margin: 0;\n    margin-left: 0.5rem;\n    text-align: left;\n    overflow-wrap: break-word;\n"]))),ae=Q.a.div(s||(s=Object(F.a)(["\n    width: 80%;\n    background-color: #5555ff;\n    border-radius: 1rem;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: self-end;\n    padding: 0.2rem;\n    padding-left: 0.5rem;\n    color: #fff;\n    margin-left: 0.5rem;\n"]))),se=Q.a.div(d||(d=Object(F.a)(["\n    width: 80%;\n    background-color: #d2d2d2;\n    border-radius: 1rem;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: self-end;\n    padding: 0.2rem;\n    padding-right: 0.5rem;\n    margin-right: 0.5rem;\n"]))),de=Q.a.form(l||(l=Object(F.a)([""]))),le=Q.a.input(m||(m=Object(F.a)(["\n    width: 96%;\n    padding: 0.3rem;\n    border-radius: 0.3rem;\n    border: none;\n    &:focus {\n        outline: none;\n    }\n"]))),me=Q.a.div(u||(u=Object(F.a)(["\n    height: 90%;\n    overflow: scroll;\n"]))),ue=Q.a.div(j||(j=Object(F.a)(["\n    width: 90%;\n    background-color: #d1ecf1;\n    border-radius: 1rem;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: self-end;\n    padding: 0.2rem;\n    padding-left: 0.5rem;\n    margin-left: 0.5rem;\n    font-size: 0.6rem;\n    margin-bottom: 0.5rem;\n"]))),je=Q.a.div(b||(b=Object(F.a)(["\n    border-radius: 1rem;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: self-end;\n    padding: 0.2rem;\n    padding-left: 0.5rem;\n    margin-left: 0.5rem;\n"]))),be=t(111),fe=function(e){var n,t=e.users;return Object(ee.jsx)(he,{children:Object(ee.jsx)(Oe,{children:null===(n=t.users)||void 0===n?void 0:n.map((function(e){return Object(ee.jsxs)(ge,{children:[Object(ee.jsx)(Z.c,{style:{color:"green"}}),Object(ee.jsxs)(xe,{children:[" ",e.name.toUpperCase()]})]},e.id)}))})})},he=Q.a.div(f||(f=Object(F.a)(["\n    position: absolute;\n    height: 23rem;\n    width: 16rem;\n    bottom: 16%;\n    border: 1px solid black;\n    border-radius: 0.5rem;\n    padding-top: 1rem;\n    padding-bottom: 0.3rem;\n    margin-left: 1rem;\n    background-color: #ececec;\n"]))),Oe=Q.a.ul(h||(h=Object(F.a)(["\n    list-style: none;\n    padding-left: 0.8rem;\n"]))),ge=Q.a.li(O||(O=Object(F.a)(["\n    text-align: left;\n    margin-bottom: 0.5rem;\n"]))),xe=Q.a.span(g||(g=Object(F.a)(["\n    margin-left: 1rem;\n"]))),pe=function(){var e=Object(P.useRef)(),n=Object(P.useState)("black"),t=Object(K.a)(n,2),i=t[0],c=t[1],r=Object(P.useState)(1),o=Object(K.a)(r,2),a=o[0],s=o[1],d=Object(P.useState)(!1),l=Object(K.a)(d,2),m=l[0],u=l[1],j=Object(P.useState)(!1),b=Object(K.a)(j,2),f=b[0],h=b[1],O=Object(P.useState)([]),g=Object(K.a)(O,2),x=g[0],p=g[1],v=Object(P.useState)(""),y=Object(K.a)(v,2),w=y[0],k=y[1],E=Object(P.useState)([]),S=Object(K.a)(E,2),C=S[0],L=S[1],N=Object(V.h)(),q=N.roomName,I=N.name,M=Object(V.g)();Object(P.useEffect)((function(){var e=document.querySelector("#board");if(e){var n=e.getContext("2d"),t=document.querySelector("#sketch");getComputedStyle(t);e.width=window.innerWidth,e.height=window.innerHeight;var i={x:0,y:0},c={x:0,y:0};e.addEventListener("mousemove",(function(n){c.x=i.x,c.y=i.y,i.x=n.pageX-e.offsetLeft,i.y=n.pageY-e.offsetTop}),!1),e.addEventListener("touchmove",(function(e){var n=e.touches[0];c.x=i.x,c.y=i.y,i.x=n.pageX,i.y=n.pageY}),!1),n.lineJoin="round",n.lineCap="round",e.addEventListener("mousedown",(function(n){e.addEventListener("mousemove",o,!1)}),!1),e.addEventListener("mouseup",(function(){e.removeEventListener("mousemove",o,!1)}),!1),e.addEventListener("touchstart",(function(){e.addEventListener("touchmove",o,!1)}),!1),e.addEventListener("touchend",(function(){e.removeEventListener("touchmove",o,!1)}),!1);var r={},o=function(t){n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(i.x,i.y),n.closePath(),n.stroke(),void 0!==r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout((function(){var n=e.toDataURL("image/png");_.emit("canvas-data",{data:n,room:q})}),1e3)}}}),[q]),Object(P.useEffect)((function(){_.emit("get-existing-data",{room:q},(function(e){if(e){var n=new Image,t=document.querySelector("#board").getContext("2d");n.onload=function(){t.drawImage(n,0,0)},n.src=e.data}}))}),[q]),Object(P.useEffect)((function(){e.current.getContext("2d").strokeStyle=i}),[i]),Object(P.useEffect)((function(){e.current.getContext("2d").lineWidth=a}),[a]),Object(P.useEffect)((function(){_.on("message",(function(e){p([].concat(Object(G.a)(x),[e]))}))}),[x]),Object(P.useEffect)((function(){_.on("canvas-data",(function(e){var n=new Image,t=document.querySelector("#board").getContext("2d");n.onload=function(){t.drawImage(n,0,0)},n.src=e}))}),[]),Object(P.useEffect)((function(){return function(){_.emit("leave-room",{room:q}),_.emit("getUsers",{room:q},(function(e){!e.users.length>0&&_.emit("delete-room",{room:q})})),_.off("canvas-data"),_.off("updated-waiting-list"),_.off("message"),_.off("canvas-data")}}),[q]);return Object(ee.jsxs)(ve,{children:[Object(ee.jsx)(Ce,{variant:"danger",onClick:function(){M("/room/".concat(I))},children:"Leave"}),Object(ee.jsxs)(ye,{className:"colors",children:[Object(ee.jsx)(Le,{onClick:function(){c("#fff")}}),Object(ee.jsx)("input",{type:"color",onChange:function(e){c(e.target.value)}}),Object(ee.jsx)(we,{children:Object(ee.jsxs)("select",{name:"size",id:"size",onChange:function(e){s(e.target.value)},children:[Object(ee.jsx)("option",{value:"1",children:"1"}),Object(ee.jsx)("option",{value:"2",children:"2"}),Object(ee.jsx)("option",{value:"3",children:"3"}),Object(ee.jsx)("option",{value:"4",children:"4"}),Object(ee.jsx)("option",{value:"5",children:"5"}),Object(ee.jsx)("option",{value:"6",children:"6"}),Object(ee.jsx)("option",{value:"7",children:"7"}),Object(ee.jsx)("option",{value:"8",children:"8"})]})})]}),Object(ee.jsx)("div",{className:"sketch",id:"sketch",children:Object(ee.jsx)("canvas",{ref:e,id:"board"})}),m&&Object(ee.jsx)(ne,{setMessages:p,setMessage:k,message:w,messages:x}),f&&Object(ee.jsx)(fe,{users:C}),Object(ee.jsxs)(Se,{children:[Object(ee.jsx)(ke,{onClick:function(){u(!m),h(!1)},children:Object(ee.jsx)(Z.a,{style:{width:"2.5rem",height:"2.5rem"}})}),Object(ee.jsx)(Ee,{onClick:function(){return h(!f),u(!1),void _.emit("getUsers",{room:q},(function(e){L(e)}))},children:Object(ee.jsx)(Z.d,{style:{width:"2.5rem",height:"2.5rem"}})})]})]})},ve=Q.a.div(x||(x=Object(F.a)(["\n    position: relative;\n    cursor: crosshair;\n"]))),ye=Q.a.div(p||(p=Object(F.a)(["\n    padding: 0.5rem 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 30%;\n    /* background-color: #e8e8e8; */\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    margin: 0 auto;\n    /* border: 1px solid #696969;\n    border-top: none;\n    border-radius: 0 0 0.6rem 0.6rem; */\n    height: 2.5rem;\n    margin-top: 0.5rem;\n"]))),we=Q.a.div(v||(v=Object(F.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-left: 0.5rem;\n"]))),ke=Q.a.div(y||(y=Object(F.a)([""]))),Ee=Q.a.div(w||(w=Object(F.a)(["\n    margin-left: 1rem;\n"]))),Se=Q.a.div(k||(k=Object(F.a)(["\n    display: flex;\n    position: absolute;\n    bottom: 8%;\n    left: 1rem;\n    cursor: pointer;\n"]))),Ce=Object(Q.a)(be.a)(E||(E=Object(F.a)(["\n    position: absolute;\n    right: 1%;\n    top: 1.2%;\n"]))),Le=Object(Q.a)(Z.b)(S||(S=Object(F.a)(["\n    cursor: pointer;\n    width: 3rem;\n    height: 3rem;\n    margin-right: 0.5rem;\n    @media (min-width: 768px) {\n        width: 2.5rem;\n        height: 2.5rem;\n    }\n    @media (min-width: 992px) {\n        width: 2rem;\n        height: 2rem;\n    }\n"]))),Ne=function(){var e=Object(P.useState)(""),n=Object(K.a)(e,2),t=n[0],i=n[1],c=Object(P.useState)(null),r=Object(K.a)(c,2),o=r[0],a=r[1],s=Object(V.g)();return Object(ee.jsxs)(Te,{children:[Object(ee.jsx)(Ie,{children:"Digital whiteboard"}),Object(ee.jsxs)(We,{onSubmit:function(e){e.preventDefault(),t?(_.emit("user-name",{name:t}),s("/room/".concat(t))):a("Write your name to continue")},children:[Object(ee.jsx)(Me,{children:" Write your name here"}),Object(ee.jsx)(De,{type:"text",onChange:function(e){a(null),i(e.target.value)}}),o&&Object(ee.jsx)(qe,{children:o}),Object(ee.jsx)(ze,{variant:"primary",type:"submit",children:"Submit"})]})]})},qe=Q.a.p(C||(C=Object(F.a)(["\n    width: 50%;\n    margin: 0 auto;\n    text-align: center;\n    background-color: #fff3cd;\n    border-color: #ffeeba;\n    color: #856404;\n"]))),Ie=Q.a.h1(L||(L=Object(F.a)(["\n    color: #fff;\n    text-align: center;\n    padding-top: 3rem;\n"]))),Me=Q.a.label(N||(N=Object(F.a)(["\n    color: #fff;\n"]))),Te=Q.a.div(q||(q=Object(F.a)(["\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    width: 100%;\n    background-color: #333;\n"]))),We=Q.a.form(I||(I=Object(F.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    width: 50%;\n    margin: 0 auto;\n    align-self: center;\n    margin-top: 8rem;\n"]))),De=Q.a.input(M||(M=Object(F.a)(["\n    width: 100%;\n    &:focus {\n        outline: none;\n    }\n"]))),ze=Object(Q.a)(be.a)(T||(T=Object(F.a)(["\n    margin-top: 1rem;\n"]))),Je=t(112),Re=t(114),Ue=t(113),Ae=function(){var e=Object(P.useState)(""),n=Object(K.a)(e,2),t=n[0],i=n[1],c=Object(P.useState)([]),r=Object(K.a)(c,2),o=r[0],a=r[1],s=Object(P.useState)(null),d=Object(K.a)(s,2),l=d[0],m=d[1],u=Object(V.g)(),j=Object(V.h)().name;Object(P.useEffect)((function(){return _.on("roomList",(function(e){a(e.rooms)})),function(){_.off("roomList")}}),[o]),Object(P.useEffect)((function(){return _.on("updated-rooms",(function(e){a(e.rooms)})),function(){_.emit("disconnect"),_.off("updated-rooms")}}),[o]);return Object(ee.jsxs)(Ye,{children:[Object(ee.jsx)(Xe,{children:"Rooms"}),Object(ee.jsxs)(Be,{onSubmit:function(e){e.preventDefault(),t?(_.emit("join",{name:j,roomName:t},(function(e){})),u("/whiteboard/".concat(j,"/").concat(t))):m("Chose a room name to continue")},children:[Object(ee.jsxs)(Je.a,{className:"mb-3",children:[Object(ee.jsx)(Re.a,{placeholder:"create a new room","aria-label":"create a new room","aria-describedby":"basic-addon2",onChange:function(e){m(null),i(e.target.value)},required:!0}),Object(ee.jsx)(Je.a.Append,{children:Object(ee.jsx)(be.a,{variant:"outline-primary",type:"submit",children:"Create"})})]}),l&&Object(ee.jsx)(Pe,{children:l})]}),o.length>0?Object(ee.jsx)(He,{children:o.map((function(e,n){return Object(ee.jsxs)(Ve,{children:[Object(ee.jsx)("span",{children:e.name}),Object(ee.jsx)(be.a,{variant:"success",onClick:function(n){return function(e,n){_.emit("join",{name:j,roomName:n},(function(e){})),u("/whiteboard/".concat(j,"/").concat(n))}(0,e.name)},children:"Join"})]},n)}))}):Object(ee.jsx)(Fe,{variant:"info",children:"There are no rooms yet!"})]})},Pe=Q.a.p(W||(W=Object(F.a)(["\n    width: 50%;\n    margin: 0 auto;\n    text-align: center;\n    background-color: #fff3cd;\n    border-color: #ffeeba;\n    color: #856404;\n"]))),Xe=Q.a.h1(D||(D=Object(F.a)(["\n    color: #fff;\n    text-align: center;\n    padding-top: 3rem;\n"]))),Ye=Q.a.div(z||(z=Object(F.a)(["\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    width: 100%;\n    background-color: #333;\n"]))),Be=Q.a.form(J||(J=Object(F.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    margin: 0 auto;\n    align-self: center;\n    @media (min-width: 800px) {\n        width: 50%;\n    }\n"]))),He=Q.a.ul(R||(R=Object(F.a)(["\n    list-style: none;\n    margin: 0 auto;\n    margin-top: 3rem;\n    color: #fff;\n    padding-left: 0;\n    width: 70%;\n"]))),Ve=Q.a.li(U||(U=Object(F.a)(["\n    display: flex;\n    justify-content: space-between;\n    padding: 0.5rem;\n    border-bottom: 1px solid;\n    align-items: center;\n"]))),Fe=Object(Q.a)(Ue.a)(A||(A=Object(F.a)(["\n    margin: 0 auto;\n    @media (min-width: 800px) {\n        width: 30%;\n    }\n"])));var Ge=function(){return Object(P.useEffect)((function(){return _.on("connection",(function(e){})),function(){_.removeAllListeners(),_.disconnect(),_.off()}}),[]),Object(ee.jsx)(H.a,{children:Object(ee.jsx)("div",{className:"App",children:Object(ee.jsxs)(V.c,{children:[Object(ee.jsx)(V.a,{path:"/",children:Object(ee.jsx)(Ne,{})}),Object(ee.jsx)(V.a,{path:"/room/:name",children:Object(ee.jsx)(Ae,{})}),Object(ee.jsx)(V.a,{path:"/Whiteboard/:name/:roomName",children:Object(ee.jsx)(pe,{})})]})})})};B.a.render(Object(ee.jsx)(X.a.StrictMode,{children:Object(ee.jsx)(Ge,{})}),document.getElementById("root"))},64:function(e,n,t){},97:function(e,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.6fdbd1dc.chunk.js.map