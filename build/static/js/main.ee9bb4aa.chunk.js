(this.webpackJsonpexamensarbete=this.webpackJsonpexamensarbete||[]).push([[0],{102:function(e,n,t){"use strict";t.r(n);var o,c,i,r,a,s,l,d,u,j,m,b,f,O,g,h,x,p,v,y,w,k,E,S,C,L,I,N,W,q,M,D,T,J,P=t(0),R=t.n(P),U=t(48),A=t.n(U),V=(t(57),t(14)),X=t(4),Y=t(2),z=t(24),B=t(6),G=t(3),F=t(11),H=t(49),K=t.n(H)()("http://localhost:8000/"),Q=t(1),Z=function(e){var n=e.setMessages,t=e.setMessage,o=e.message,c=e.messages,i=Object(X.h)().name,r=Object(P.useRef)(null);Object(P.useEffect)((function(){return K.on("message",(function(e){n([].concat(Object(z.a)(c),[e]))})),function(){K.off("message")}}),[c,n]);return Object(P.useEffect)((function(){var e;null===(e=r.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[c]),Object(Q.jsxs)($,{children:[Object(Q.jsxs)(ae,{children:[null===c||void 0===c?void 0:c.map((function(e,n){return e.user===i?Object(Q.jsxs)(_,{children:[Object(Q.jsx)(F.b,{}),Object(Q.jsxs)(oe,{children:[Object(Q.jsx)(ne,{children:e.user}),Object(Q.jsx)(ne,{children:e.text})]})]},n):Object(Q.jsxs)(ee,{children:[Object(Q.jsx)(F.b,{}),Object(Q.jsxs)(ce,{children:[Object(Q.jsx)(te,{children:e.user}),Object(Q.jsx)(te,{children:e.text})]})]},n)})),Object(Q.jsx)("div",{ref:r})]}),Object(Q.jsx)(ie,{onSubmit:function(e){e.preventDefault(),o&&K.emit("sendMessage",o,(function(){return t("")}))},children:Object(Q.jsx)(re,{type:"text",value:o||"",required:!0,onChange:function(e){return t(e.target.value)},placeholder:"Write some thing..."})})]})},$=G.a.div(o||(o=Object(Y.a)(["\n    position: absolute;\n    height: 23rem;\n    width: 16rem;\n    bottom: 6rem;\n    border: 1px solid black;\n    border-radius: 0.5rem;\n    display: flex;\n    flex-direction: column;\n    padding-top: 1rem;\n    padding-bottom: 0.3rem;\n    margin-left: 1rem;\n    justify-content: space-between;\n"]))),_=G.a.div(c||(c=Object(Y.a)(["\n    align-self: flex-start;\n    display: flex;\n    align-items: center;\n    margin-left: 0.2rem;\n    margin-bottom: 0.4rem;\n"]))),ee=G.a.div(i||(i=Object(Y.a)(["\n    align-self: flex-start;\n    display: flex;\n    align-items: center;\n    margin-left: 0.2rem;\n    margin-bottom: 0.4rem;\n"]))),ne=G.a.p(r||(r=Object(Y.a)(["\n    margin: 0;\n    margin-left: 0.5rem;\n"]))),te=G.a.p(a||(a=Object(Y.a)(["\n    margin: 0;\n    margin-left: 0.5rem;\n"]))),oe=G.a.div(s||(s=Object(Y.a)(["\n    min-width: 10rem;\n    background-color: #5555ff;\n    border-radius: 1rem;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: self-end;\n    padding: 0.2rem;\n    padding-left: 0.5rem;\n    color: #fff;\n    margin-left: 0.5rem;\n"]))),ce=G.a.div(l||(l=Object(Y.a)(["\n    min-width: 10rem;\n    background-color: #d2d2d2;\n    border-radius: 1rem;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: self-end;\n    padding: 0.2rem;\n    padding-left: 0.5rem;\n    margin-left: 0.5rem;\n"]))),ie=G.a.form(d||(d=Object(Y.a)([""]))),re=G.a.input(u||(u=Object(Y.a)(["\n    width: 96%;\n    padding: 0.3rem;\n"]))),ae=G.a.div(j||(j=Object(Y.a)(["\n    height: 90%;\n    overflow: scroll;\n"]))),se=t(103),le=function(e){var n,t=e.users;return console.log(t.users),Object(Q.jsx)(de,{children:Object(Q.jsx)(ue,{children:null===(n=t.users)||void 0===n?void 0:n.map((function(e){return console.log(e),Object(Q.jsxs)(je,{children:[Object(Q.jsx)(F.b,{style:{color:"green"}}),Object(Q.jsxs)(me,{children:[" ",e.name.toUpperCase()]})]},e.id)}))})})},de=G.a.div(m||(m=Object(Y.a)(["\n    position: absolute;\n    height: 23rem;\n    width: 16rem;\n    bottom: 6rem;\n    border: 1px solid black;\n    border-radius: 0.5rem;\n    padding-top: 1rem;\n    padding-bottom: 0.3rem;\n    margin-left: 1rem;\n"]))),ue=G.a.ul(b||(b=Object(Y.a)(["\n    list-style: none;\n    padding-left: 0.8rem;\n"]))),je=G.a.li(f||(f=Object(Y.a)(["\n    text-align: left;\n    margin-bottom: 0.5rem;\n"]))),me=G.a.span(O||(O=Object(Y.a)(["\n    margin-left: 1rem;\n"]))),be=function(){var e=Object(P.useRef)(),n=Object(P.useState)("black"),t=Object(B.a)(n,2),o=t[0],c=t[1],i=Object(P.useState)(1),r=Object(B.a)(i,2),a=r[0],s=r[1],l=Object(P.useState)(!1),d=Object(B.a)(l,2),u=d[0],j=d[1],m=Object(P.useState)(!1),b=Object(B.a)(m,2),f=b[0],O=b[1],g=Object(P.useState)([]),h=Object(B.a)(g,2),x=h[0],p=h[1],v=Object(P.useState)(""),y=Object(B.a)(v,2),w=y[0],k=y[1],E=Object(P.useState)([]),S=Object(B.a)(E,2),C=S[0],L=S[1],I=Object(X.h)(),N=I.roomName,W=I.name,q=Object(X.g)();Object(P.useEffect)((function(){var e=document.querySelector("#board");if(e){var n=e.getContext("2d"),t=document.querySelector("#sketch"),o=getComputedStyle(t);e.width=parseInt(o.getPropertyValue("width")),e.height=parseInt(o.getPropertyValue("height"));var c={x:0,y:0},i={x:0,y:0};e.addEventListener("mousemove",(function(e){i.x=c.x,i.y=c.y,c.x=e.pageX-this.offsetLeft,c.y=e.pageY-this.offsetTop}),!1),n.lineWidth=5,n.lineJoin="round",n.lineCap="round",n.strokeStyle="blue",e.addEventListener("mousedown",(function(n){e.addEventListener("mousemove",a,!1)}),!1),e.addEventListener("mouseup",(function(){e.removeEventListener("mousemove",a,!1)}),!1),e.addEventListener("touchstart",(function(){e.removeEventListener("mousemove",a,!1)}),!1),e.addEventListener("touchend",(function(){e.removeEventListener("mousemove",a,!1)}),!1),e.addEventListener("touchmove",(function(n){var t=n.touches[0];e.addEventListener("mousemove",(function(e){i.x=c.x,i.y=c.y,c.x=e.pageX-t.clientX,c.y=e.pageY-t.clientY}))}),!1);var r={},a=function(t){n.beginPath(),n.moveTo(i.x,i.y),n.lineTo(c.x,c.y),n.closePath(),n.stroke(),void 0!==r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout((function(){var n=e.toDataURL("image/png");K.emit("canvas-data",{data:n,room:N})}),1e3)}}}),[N]),Object(P.useEffect)((function(){K.emit("get-existing-data",{room:N},(function(e){if(console.log(e),e){var n=new Image,t=document.querySelector("#board").getContext("2d");n.onload=function(){t.drawImage(n,0,0)},n.src=e.data}}))}),[N]),Object(P.useEffect)((function(){e.current.getContext("2d").strokeStyle=o}),[o]),Object(P.useEffect)((function(){e.current.getContext("2d").lineWidth=a}),[a]),Object(P.useEffect)((function(){K.on("message",(function(e){p([].concat(Object(z.a)(x),[e]))}))}),[x]),Object(P.useEffect)((function(){K.on("canvas-data",(function(e){var n=new Image,t=document.querySelector("#board").getContext("2d");n.onload=function(){t.drawImage(n,0,0)},n.src=e}))}),[]),Object(P.useEffect)((function(){K.on("updated-waiting-list",(function(e){console.log("Got updated waiting list from server:",e)}))}),[]);return Object(P.useEffect)((function(){return function(){K.emit("leave-room",{room:N}),K.emit("getUsers",{room:N},(function(e){console.log(e.users),!e.users.length>0&&(console.log("its empty"),K.emit("delete-room",{room:N}))})),K.off("canvas-data"),K.off("updated-waiting-list"),K.off("message"),K.off("canvas-data")}}),[N]),Object(Q.jsxs)(fe,{children:[Object(Q.jsx)(ve,{variant:"danger",onClick:function(){console.log("leave"),q("/room/".concat(W))},children:"Leave"}),Object(Q.jsxs)(Oe,{className:"colors",children:[Object(Q.jsx)("input",{type:"color",onChange:function(e){c(e.target.value)}}),Object(Q.jsx)(ge,{children:Object(Q.jsxs)("select",{name:"size",id:"size",onChange:function(e){s(e.target.value)},children:[Object(Q.jsx)("option",{value:"1",children:"1"}),Object(Q.jsx)("option",{value:"2",children:"2"}),Object(Q.jsx)("option",{value:"3",children:"3"}),Object(Q.jsx)("option",{value:"4",children:"4"}),Object(Q.jsx)("option",{value:"5",children:"5"}),Object(Q.jsx)("option",{value:"6",children:"6"})]})})]}),Object(Q.jsx)("div",{className:"sketch",id:"sketch",children:Object(Q.jsx)("canvas",{ref:e,id:"board"})}),u&&Object(Q.jsx)(Z,{setMessages:p,setMessage:k,message:w,messages:x}),f&&Object(Q.jsx)(le,{users:C}),Object(Q.jsxs)(pe,{children:[Object(Q.jsx)(he,{onClick:function(){j(!u),O(!1)},children:Object(Q.jsx)(F.a,{style:{width:"2.5rem",height:"2.5rem"}})}),Object(Q.jsx)(xe,{onClick:function(){return O(!f),j(!1),void K.emit("getUsers",{room:N},(function(e){L(e)}))},children:Object(Q.jsx)(F.c,{style:{width:"2.5rem",height:"2.5rem"}})})]})]})},fe=G.a.div(g||(g=Object(Y.a)(["\n    position: relative;\n"]))),Oe=G.a.div(h||(h=Object(Y.a)(["\n    padding: 0.5rem 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 22%;\n    /* background-color: #e8e8e8; */\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    margin: 0 auto;\n    /* border: 1px solid #696969;\n    border-top: none;\n    border-radius: 0 0 0.6rem 0.6rem; */\n    height: 2.5rem;\n"]))),ge=G.a.div(x||(x=Object(Y.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-left: 0.5rem;\n"]))),he=G.a.div(p||(p=Object(Y.a)([""]))),xe=G.a.div(v||(v=Object(Y.a)(["\n    margin-left: 1rem;\n"]))),pe=G.a.div(y||(y=Object(Y.a)(["\n    display: flex;\n    position: absolute;\n    bottom: 3rem;\n    left: 1rem;\n    cursor: pointer;\n"]))),ve=Object(G.a)(se.a)(w||(w=Object(Y.a)(["\n    position: absolute;\n    right: 1%;\n    top: 1.2%;\n"]))),ye=function(){var e=Object(P.useState)(""),n=Object(B.a)(e,2),t=n[0],o=n[1],c=Object(P.useState)(null),i=Object(B.a)(c,2),r=i[0],a=i[1],s=Object(X.g)();return Object(Q.jsxs)(Se,{children:[Object(Q.jsx)(ke,{children:"Digital whiteboard"}),Object(Q.jsxs)(Ce,{onSubmit:function(e){if(e.preventDefault(),console.log("im working"),!t)return console.log("Write your name to continue"),void a("Write your name to continue");K.emit("user-name",{name:t}),s("/room/".concat(t))},children:[Object(Q.jsx)(Ee,{children:" Write your name here"}),Object(Q.jsx)(Le,{type:"text",onChange:function(e){a(null),o(e.target.value)}}),r&&Object(Q.jsx)(we,{children:r}),Object(Q.jsx)(Ie,{variant:"primary",type:"submit",children:"Submit"})]})]})},we=G.a.p(k||(k=Object(Y.a)(["\n    width: 50%;\n    margin: 0 auto;\n    text-align: center;\n    background-color: #fff3cd;\n    border-color: #ffeeba;\n    color: #856404;\n"]))),ke=G.a.h1(E||(E=Object(Y.a)(["\n    color: #fff;\n    text-align: center;\n    padding-top: 3rem;\n"]))),Ee=G.a.label(S||(S=Object(Y.a)(["\n    color: #fff;\n"]))),Se=G.a.div(C||(C=Object(Y.a)(["\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    width: 100%;\n    background-color: #333;\n"]))),Ce=G.a.form(L||(L=Object(Y.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    width: 50%;\n    margin: 0 auto;\n    align-self: center;\n    margin-top: 8rem;\n"]))),Le=G.a.input(I||(I=Object(Y.a)(["\n    width: 100%;\n    &:focus {\n        outline: none;\n    }\n"]))),Ie=Object(G.a)(se.a)(N||(N=Object(Y.a)(["\n    margin-top: 1rem;\n"]))),Ne=t(104),We=t(105),qe=function(){var e=Object(P.useState)(""),n=Object(B.a)(e,2),t=n[0],o=n[1],c=Object(P.useState)([]),i=Object(B.a)(c,2),r=i[0],a=i[1],s=Object(P.useState)(null),l=Object(B.a)(s,2),d=l[0],u=l[1],j=Object(X.g)(),m=Object(X.h)().name;Object(P.useEffect)((function(){return K.on("roomList",(function(e){a(e.rooms)})),function(){K.off("roomList")}}),[r]),Object(P.useEffect)((function(){return K.on("updated-rooms",(function(e){a(e.rooms)})),function(){K.emit("disconnect"),K.off("updated-rooms")}}),[r]);return Object(Q.jsxs)(Te,{children:[Object(Q.jsx)(De,{children:"Rooms"}),Object(Q.jsxs)(Je,{onSubmit:function(e){e.preventDefault(),t?(K.emit("join",{name:m,roomName:t},(function(e){})),j("/whiteboard/".concat(m,"/").concat(t))):u("Chose a room name to continue")},children:[Object(Q.jsxs)(Ne.a,{className:"mb-3",children:[Object(Q.jsx)(We.a,{placeholder:"create a new room","aria-label":"create a new room","aria-describedby":"basic-addon2",onChange:function(e){u(null),o(e.target.value)},required:!0}),Object(Q.jsx)(Ne.a.Append,{children:Object(Q.jsx)(se.a,{variant:"outline-primary",type:"submit",children:"Create"})})]}),d&&Object(Q.jsx)(Me,{children:d})]}),Object(Q.jsx)(Pe,{children:r&&r.map((function(e,n){return Object(Q.jsxs)(Re,{children:[Object(Q.jsx)("span",{children:e.name}),Object(Q.jsx)(se.a,{variant:"success",onClick:function(n){return function(e,n){K.emit("join",{name:m,roomName:n},(function(e){})),j("/whiteboard/".concat(m,"/").concat(n))}(0,e.name)},children:"Join"})]},n)}))})]})},Me=G.a.p(W||(W=Object(Y.a)(["\n    width: 50%;\n    margin: 0 auto;\n    text-align: center;\n    background-color: #fff3cd;\n    border-color: #ffeeba;\n    color: #856404;\n"]))),De=G.a.h1(q||(q=Object(Y.a)(["\n    color: #fff;\n    text-align: center;\n    padding-top: 3rem;\n"]))),Te=G.a.div(M||(M=Object(Y.a)(["\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    width: 100%;\n    background-color: #333;\n"]))),Je=G.a.form(D||(D=Object(Y.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    margin: 0 auto;\n    align-self: center;\n    @media (min-width: 800px) {\n        width: 50%;\n    }\n"]))),Pe=G.a.ul(T||(T=Object(Y.a)(["\n    list-style: none;\n    margin: 0 auto;\n    margin-top: 3rem;\n    color: #fff;\n    padding-left: 0;\n    width: 70%;\n"]))),Re=G.a.li(J||(J=Object(Y.a)(["\n    display: flex;\n    justify-content: space-between;\n    padding: 0.5rem;\n    border-bottom: 1px solid;\n    align-items: center;\n"])));var Ue=function(){return Object(P.useEffect)((function(){return K.on("connection",(function(e){console.log("connected to socket server"+e)})),function(){console.log("Will disconnect from socket-server now..."),K.removeAllListeners(),K.disconnect(),K.off()}}),[]),Object(Q.jsx)(V.a,{children:Object(Q.jsx)("div",{className:"App",children:Object(Q.jsxs)(X.c,{children:[Object(Q.jsx)(X.a,{path:"/",children:Object(Q.jsx)(ye,{})}),Object(Q.jsx)(X.a,{path:"/room/:name",children:Object(Q.jsx)(qe,{})}),Object(Q.jsx)(X.a,{path:"/Whiteboard/:name/:roomName",children:Object(Q.jsx)(be,{})})]})})})};A.a.render(Object(Q.jsx)(R.a.StrictMode,{children:Object(Q.jsx)(Ue,{})}),document.getElementById("root"))},57:function(e,n,t){},90:function(e,n){}},[[102,1,2]]]);
//# sourceMappingURL=main.ee9bb4aa.chunk.js.map