(this.webpackJsonpexamensarbete=this.webpackJsonpexamensarbete||[]).push([[0],{109:function(e,n,t){"use strict";t.r(n);var o,c,i,r,a,s,l,d,u,m,j,b,f,g,h,O,x,p,v,y,w,k,E,S,C,L,W,N,T,q,I,M,D,z,J,R,U,A,P=t(0),X=t.n(P),Y=t(17),B=t.n(Y),G=(t(64),t(16)),H=t(4),V=t(2),F=t(26),K=t(9),Q=t(3),Z=t(13),$=t(52),_=t.n($)()("https://a-digital-whiteboard.herokuapp.com/"),ee=t(1),ne=function(e){var n=e.setMessages,t=e.setMessage,o=e.message,c=e.messages,i=Object(H.h)().name,r=Object(P.useRef)(null);Object(P.useEffect)((function(){return _.on("message",(function(e){n([].concat(Object(F.a)(c),[e]))})),function(){_.off("message")}}),[c,n]);return Object(P.useEffect)((function(){var e;null===(e=r.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[c]),Object(ee.jsxs)(te,{children:[Object(ee.jsxs)(ue,{children:[null===c||void 0===c?void 0:c.map((function(e,n){return e.user===i?Object(ee.jsxs)(oe,{children:[Object(ee.jsx)(Z.c,{}),Object(ee.jsx)(ae,{children:Object(ee.jsx)(re,{children:e.text})})]},n):"admin"===e.user?Object(ee.jsx)(me,{children:Object(ee.jsx)(je,{children:Object(ee.jsx)(re,{children:e.text})})},n):Object(ee.jsxs)(ce,{children:[Object(ee.jsxs)(se,{children:[Object(ee.jsxs)(ie,{children:[e.user,":"]}),Object(ee.jsx)(re,{children:e.text})]}),Object(ee.jsx)(Z.c,{})]},n)})),Object(ee.jsx)("div",{ref:r})]}),Object(ee.jsx)(le,{onSubmit:function(e){e.preventDefault(),o&&_.emit("sendMessage",o,(function(){return t("")}))},children:Object(ee.jsx)(de,{type:"text",value:o||"",required:!0,onChange:function(e){return t(e.target.value)},placeholder:"Write some thing..."})})]})},te=Q.a.div(o||(o=Object(V.a)(["\n    position: absolute;\n    height: 23rem;\n    width: 16rem;\n    bottom: 16%;\n    border: 1px solid black;\n    border-radius: 0.5rem;\n    display: flex;\n    flex-direction: column;\n    padding-top: 1rem;\n    padding-bottom: 0.3rem;\n    margin-left: 1rem;\n    justify-content: space-between;\n    background-color: #ececec;\n"]))),oe=Q.a.div(c||(c=Object(V.a)(["\n    align-self: flex-start;\n    display: flex;\n    align-items: center;\n    margin-left: 0.2rem;\n    margin-bottom: 0.4rem;\n"]))),ce=Q.a.div(i||(i=Object(V.a)(["\n    align-self: flex-start;\n    display: flex;\n    align-items: center;\n    margin-right: 0.2rem;\n    margin-bottom: 0.4rem;\n    justify-content: flex-end;\n"]))),ie=Q.a.p(r||(r=Object(V.a)(["\n    margin: 0;\n    margin-left: 0.5rem;\n    font-size: 0.7rem;\n    text-align: left;\n    overflow-wrap: break-word;\n"]))),re=Q.a.p(a||(a=Object(V.a)(["\n    margin: 0;\n    margin-left: 0.5rem;\n    text-align: left;\n    overflow-wrap: break-word;\n"]))),ae=Q.a.div(s||(s=Object(V.a)(["\n    width: 80%;\n    background-color: #5555ff;\n    border-radius: 1rem;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: self-end;\n    padding: 0.2rem;\n    padding-left: 0.5rem;\n    color: #fff;\n    margin-left: 0.5rem;\n"]))),se=Q.a.div(l||(l=Object(V.a)(["\n    width: 80%;\n    background-color: #d2d2d2;\n    border-radius: 1rem;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: self-end;\n    padding: 0.2rem;\n    padding-right: 0.5rem;\n    margin-right: 0.5rem;\n"]))),le=Q.a.form(d||(d=Object(V.a)([""]))),de=Q.a.input(u||(u=Object(V.a)(["\n    width: 96%;\n    padding: 0.3rem;\n    border-radius: 0.3rem;\n    border: none;\n    &:focus {\n        outline: none;\n    }\n"]))),ue=Q.a.div(m||(m=Object(V.a)(["\n    height: 90%;\n    overflow: scroll;\n"]))),me=Q.a.div(j||(j=Object(V.a)(["\n    width: 90%;\n    background-color: #d1ecf1;\n    border-radius: 1rem;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: self-end;\n    padding: 0.2rem;\n    padding-left: 0.5rem;\n    margin-left: 0.5rem;\n    font-size: 0.6rem;\n    margin-bottom: 0.5rem;\n"]))),je=Q.a.div(b||(b=Object(V.a)(["\n    border-radius: 1rem;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: self-end;\n    padding: 0.2rem;\n    padding-left: 0.5rem;\n    margin-left: 0.5rem;\n"]))),be=t(111),fe=function(e){var n,t=e.users;return console.log(t.users),Object(ee.jsx)(ge,{children:Object(ee.jsx)(he,{children:null===(n=t.users)||void 0===n?void 0:n.map((function(e){return console.log(e),Object(ee.jsxs)(Oe,{children:[Object(ee.jsx)(Z.c,{style:{color:"green"}}),Object(ee.jsxs)(xe,{children:[" ",e.name.toUpperCase()]})]},e.id)}))})})},ge=Q.a.div(f||(f=Object(V.a)(["\n    position: absolute;\n    height: 23rem;\n    width: 16rem;\n    bottom: 16%;\n    border: 1px solid black;\n    border-radius: 0.5rem;\n    padding-top: 1rem;\n    padding-bottom: 0.3rem;\n    margin-left: 1rem;\n    background-color: #ececec;\n"]))),he=Q.a.ul(g||(g=Object(V.a)(["\n    list-style: none;\n    padding-left: 0.8rem;\n"]))),Oe=Q.a.li(h||(h=Object(V.a)(["\n    text-align: left;\n    margin-bottom: 0.5rem;\n"]))),xe=Q.a.span(O||(O=Object(V.a)(["\n    margin-left: 1rem;\n"]))),pe=function(){var e=Object(P.useRef)(),n=Object(P.useState)("black"),t=Object(K.a)(n,2),o=t[0],c=t[1],i=Object(P.useState)(1),r=Object(K.a)(i,2),a=r[0],s=r[1],l=Object(P.useState)(!1),d=Object(K.a)(l,2),u=d[0],m=d[1],j=Object(P.useState)(!1),b=Object(K.a)(j,2),f=b[0],g=b[1],h=Object(P.useState)([]),O=Object(K.a)(h,2),x=O[0],p=O[1],v=Object(P.useState)(""),y=Object(K.a)(v,2),w=y[0],k=y[1],E=Object(P.useState)([]),S=Object(K.a)(E,2),C=S[0],L=S[1],W=Object(H.h)(),N=W.roomName,T=W.name,q=Object(H.g)();Object(P.useEffect)((function(){var e=document.querySelector("#board");if(e){var n=e.getContext("2d"),t=document.querySelector("#sketch");getComputedStyle(t);e.width=window.innerWidth,e.height=window.innerHeight;var o={x:0,y:0},c={x:0,y:0};console.log(window.innerWidth),e.addEventListener("mousemove",(function(e){c.x=o.x,c.y=o.y,o.x=e.pageX-this.offsetLeft,o.y=e.pageY-this.offsetTop}),!1),e.addEventListener("touchmove",(function(e){var n=e.touches[0];c.x=o.x,c.y=o.y,o.x=n.pageX-this.offsetLeft,o.y=n.pageY-this.offsetTop}),!1),n.lineWidth=5,n.lineJoin="round",n.lineCap="round",n.strokeStyle="blue",e.addEventListener("mousedown",(function(n){e.addEventListener("mousemove",r,!1)}),!1),e.addEventListener("mouseup",(function(){e.removeEventListener("mousemove",r,!1)}),!1),e.addEventListener("touchstart",(function(){e.addEventListener("touchmove",r,!1)}),!1),e.addEventListener("touchend",(function(){e.removeEventListener("touchmove",r,!1)}),!1),console.log(e.width);var i={},r=function(t){n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(o.x,o.y),n.closePath(),n.stroke(),void 0!==i.timeout&&clearTimeout(i.timeout),i.timeout=setTimeout((function(){var n=e.toDataURL("image/png");_.emit("canvas-data",{data:n,room:N})}),1e3)}}}),[N]),Object(P.useEffect)((function(){_.emit("get-existing-data",{room:N},(function(e){if(console.log(e),e){var n=new Image,t=document.querySelector("#board").getContext("2d");n.onload=function(){t.drawImage(n,0,0)},n.src=e.data}}))}),[N]),Object(P.useEffect)((function(){e.current.getContext("2d").strokeStyle=o}),[o]),Object(P.useEffect)((function(){e.current.getContext("2d").lineWidth=a}),[a]),Object(P.useEffect)((function(){_.on("message",(function(e){p([].concat(Object(F.a)(x),[e]))}))}),[x]),Object(P.useEffect)((function(){_.on("canvas-data",(function(e){var n=new Image,t=document.querySelector("#board").getContext("2d");n.onload=function(){t.drawImage(n,0,0)},n.src=e}))}),[]),Object(P.useEffect)((function(){_.on("updated-waiting-list",(function(e){console.log("Got updated waiting list from server:",e)}))}),[]);return Object(P.useEffect)((function(){return function(){_.emit("leave-room",{room:N}),_.emit("getUsers",{room:N},(function(e){console.log(e.users),!e.users.length>0&&(console.log("its empty"),_.emit("delete-room",{room:N}))})),_.off("canvas-data"),_.off("updated-waiting-list"),_.off("message"),_.off("canvas-data")}}),[N]),Object(ee.jsxs)(ve,{children:[Object(ee.jsx)(Ce,{variant:"danger",onClick:function(){console.log("leave"),q("/room/".concat(T))},children:"Leave"}),Object(ee.jsxs)(ye,{className:"colors",children:[Object(ee.jsx)(Le,{onClick:function(){c("#fff")}}),Object(ee.jsx)("input",{type:"color",onChange:function(e){c(e.target.value)}}),Object(ee.jsx)(we,{children:Object(ee.jsxs)("select",{name:"size",id:"size",onChange:function(e){s(e.target.value)},children:[Object(ee.jsx)("option",{value:"1",children:"1"}),Object(ee.jsx)("option",{value:"2",children:"2"}),Object(ee.jsx)("option",{value:"3",children:"3"}),Object(ee.jsx)("option",{value:"4",children:"4"}),Object(ee.jsx)("option",{value:"5",children:"5"}),Object(ee.jsx)("option",{value:"6",children:"6"}),Object(ee.jsx)("option",{value:"7",children:"7"}),Object(ee.jsx)("option",{value:"8",children:"8"})]})})]}),Object(ee.jsx)("div",{className:"sketch",id:"sketch",children:Object(ee.jsx)("canvas",{ref:e,id:"board"})}),u&&Object(ee.jsx)(ne,{setMessages:p,setMessage:k,message:w,messages:x}),f&&Object(ee.jsx)(fe,{users:C}),Object(ee.jsxs)(Se,{children:[Object(ee.jsx)(ke,{onClick:function(){m(!u),g(!1)},children:Object(ee.jsx)(Z.a,{style:{width:"2.5rem",height:"2.5rem"}})}),Object(ee.jsx)(Ee,{onClick:function(){return g(!f),m(!1),void _.emit("getUsers",{room:N},(function(e){L(e)}))},children:Object(ee.jsx)(Z.d,{style:{width:"2.5rem",height:"2.5rem"}})})]})]})},ve=Q.a.div(x||(x=Object(V.a)(["\n    position: relative;\n    cursor: crosshair;\n"]))),ye=Q.a.div(p||(p=Object(V.a)(["\n    padding: 0.5rem 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 30%;\n    /* background-color: #e8e8e8; */\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    margin: 0 auto;\n    /* border: 1px solid #696969;\n    border-top: none;\n    border-radius: 0 0 0.6rem 0.6rem; */\n    height: 2.5rem;\n"]))),we=Q.a.div(v||(v=Object(V.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-left: 0.5rem;\n"]))),ke=Q.a.div(y||(y=Object(V.a)([""]))),Ee=Q.a.div(w||(w=Object(V.a)(["\n    margin-left: 1rem;\n"]))),Se=Q.a.div(k||(k=Object(V.a)(["\n    display: flex;\n    position: absolute;\n    bottom: 8%;\n    left: 1rem;\n    cursor: pointer;\n"]))),Ce=Object(Q.a)(be.a)(E||(E=Object(V.a)(["\n    position: absolute;\n    right: 1%;\n    top: 1.2%;\n"]))),Le=Object(Q.a)(Z.b)(S||(S=Object(V.a)(["\n    cursor: pointer;\n    width: 3rem;\n    height: 3rem;\n    margin-right: 0.5rem;\n    @media (min-width: 768px) {\n        width: 1.5rem;\n        height: 1.5rem;\n    }\n"]))),We=function(){var e=Object(P.useState)(""),n=Object(K.a)(e,2),t=n[0],o=n[1],c=Object(P.useState)(null),i=Object(K.a)(c,2),r=i[0],a=i[1],s=Object(H.g)();return Object(ee.jsxs)(Ie,{children:[Object(ee.jsx)(Te,{children:"Digital whiteboard"}),Object(ee.jsxs)(Me,{onSubmit:function(e){if(e.preventDefault(),console.log("im working"),!t)return console.log("Write your name to continue"),void a("Write your name to continue");_.emit("user-name",{name:t}),s("/room/".concat(t))},children:[Object(ee.jsx)(qe,{children:" Write your name here"}),Object(ee.jsx)(De,{type:"text",onChange:function(e){a(null),o(e.target.value)}}),r&&Object(ee.jsx)(Ne,{children:r}),Object(ee.jsx)(ze,{variant:"primary",type:"submit",children:"Submit"})]})]})},Ne=Q.a.p(C||(C=Object(V.a)(["\n    width: 50%;\n    margin: 0 auto;\n    text-align: center;\n    background-color: #fff3cd;\n    border-color: #ffeeba;\n    color: #856404;\n"]))),Te=Q.a.h1(L||(L=Object(V.a)(["\n    color: #fff;\n    text-align: center;\n    padding-top: 3rem;\n"]))),qe=Q.a.label(W||(W=Object(V.a)(["\n    color: #fff;\n"]))),Ie=Q.a.div(N||(N=Object(V.a)(["\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    width: 100%;\n    background-color: #333;\n"]))),Me=Q.a.form(T||(T=Object(V.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    width: 50%;\n    margin: 0 auto;\n    align-self: center;\n    margin-top: 8rem;\n"]))),De=Q.a.input(q||(q=Object(V.a)(["\n    width: 100%;\n    &:focus {\n        outline: none;\n    }\n"]))),ze=Object(Q.a)(be.a)(I||(I=Object(V.a)(["\n    margin-top: 1rem;\n"]))),Je=t(112),Re=t(114),Ue=t(113),Ae=function(){var e=Object(P.useState)(""),n=Object(K.a)(e,2),t=n[0],o=n[1],c=Object(P.useState)([]),i=Object(K.a)(c,2),r=i[0],a=i[1],s=Object(P.useState)(null),l=Object(K.a)(s,2),d=l[0],u=l[1],m=Object(H.g)(),j=Object(H.h)().name;Object(P.useEffect)((function(){return _.on("roomList",(function(e){a(e.rooms)})),function(){_.off("roomList")}}),[r]),Object(P.useEffect)((function(){return _.on("updated-rooms",(function(e){a(e.rooms)})),function(){_.emit("disconnect"),_.off("updated-rooms")}}),[r]);return Object(ee.jsxs)(Ye,{children:[Object(ee.jsx)(Xe,{children:"Rooms"}),Object(ee.jsxs)(Be,{onSubmit:function(e){e.preventDefault(),t?(_.emit("join",{name:j,roomName:t},(function(e){})),m("/whiteboard/".concat(j,"/").concat(t))):u("Chose a room name to continue")},children:[Object(ee.jsxs)(Je.a,{className:"mb-3",children:[Object(ee.jsx)(Re.a,{placeholder:"create a new room","aria-label":"create a new room","aria-describedby":"basic-addon2",onChange:function(e){u(null),o(e.target.value)},required:!0}),Object(ee.jsx)(Je.a.Append,{children:Object(ee.jsx)(be.a,{variant:"outline-primary",type:"submit",children:"Create"})})]}),d&&Object(ee.jsx)(Pe,{children:d})]}),r.length>0?Object(ee.jsx)(Ge,{children:r.map((function(e,n){return Object(ee.jsxs)(He,{children:[Object(ee.jsx)("span",{children:e.name}),Object(ee.jsx)(be.a,{variant:"success",onClick:function(n){return function(e,n){_.emit("join",{name:j,roomName:n},(function(e){})),m("/whiteboard/".concat(j,"/").concat(n))}(0,e.name)},children:"Join"})]},n)}))}):Object(ee.jsx)(Ve,{variant:"info",children:"There are no rooms yet!"})]})},Pe=Q.a.p(M||(M=Object(V.a)(["\n    width: 50%;\n    margin: 0 auto;\n    text-align: center;\n    background-color: #fff3cd;\n    border-color: #ffeeba;\n    color: #856404;\n"]))),Xe=Q.a.h1(D||(D=Object(V.a)(["\n    color: #fff;\n    text-align: center;\n    padding-top: 3rem;\n"]))),Ye=Q.a.div(z||(z=Object(V.a)(["\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    width: 100%;\n    background-color: #333;\n"]))),Be=Q.a.form(J||(J=Object(V.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    margin: 0 auto;\n    align-self: center;\n    @media (min-width: 800px) {\n        width: 50%;\n    }\n"]))),Ge=Q.a.ul(R||(R=Object(V.a)(["\n    list-style: none;\n    margin: 0 auto;\n    margin-top: 3rem;\n    color: #fff;\n    padding-left: 0;\n    width: 70%;\n"]))),He=Q.a.li(U||(U=Object(V.a)(["\n    display: flex;\n    justify-content: space-between;\n    padding: 0.5rem;\n    border-bottom: 1px solid;\n    align-items: center;\n"]))),Ve=Object(Q.a)(Ue.a)(A||(A=Object(V.a)(["\n    margin: 0 auto;\n    @media (min-width: 800px) {\n        width: 30%;\n    }\n"])));var Fe=function(){return Object(P.useEffect)((function(){return _.on("connection",(function(e){console.log("connected to socket server"+e)})),function(){console.log("Will disconnect from socket-server now..."),_.removeAllListeners(),_.disconnect(),_.off()}}),[]),Object(ee.jsx)(G.a,{children:Object(ee.jsx)("div",{className:"App",children:Object(ee.jsxs)(H.c,{children:[Object(ee.jsx)(H.a,{path:"/",children:Object(ee.jsx)(We,{})}),Object(ee.jsx)(H.a,{path:"/room/:name",children:Object(ee.jsx)(Ae,{})}),Object(ee.jsx)(H.a,{path:"/Whiteboard/:name/:roomName",children:Object(ee.jsx)(pe,{})})]})})})};B.a.render(Object(ee.jsx)(X.a.StrictMode,{children:Object(ee.jsx)(Fe,{})}),document.getElementById("root"))},64:function(e,n,t){},97:function(e,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.5a1ab970.chunk.js.map